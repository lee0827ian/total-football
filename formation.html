<!DOCTYPE html>
<html lang="ko">
<head>
    // ...existing code...
</head>
<body>
    <div class="header">
        <h1>âš½ í¬ë©”ì´ì…˜ í¸ì§‘ê¸°</h1>
        <div class="controls">
            <button onclick="location.href='index.html'">â† ë©”ì¸ìœ¼ë¡œ</button>
            <button onclick="resetFormation()">ğŸ”„ ì´ˆê¸°í™”</button>
            <button onclick="saveFormation()">ğŸ’¾ ì €ì¥</button>
        </div>
    </div>

    <div class="stats">
        <span>ì „ì²´ í•„ë“œ ì„ ìˆ˜: <span id="fieldCount">0</span>/33ëª…</span>
    </div>

    <div class="fields-container">
        // ...existing fields container code...
    </div>

    <div class="bench-area">
        <div class="controls" style="text-align: center; margin-bottom: 15px;">
            <!-- ì„ ìˆ˜ ì¶”ê°€ UI -->
            <div style="margin-bottom: 15px;">
                <input type="text" id="newPlayerName" placeholder="ìƒˆ ì„ ìˆ˜ ì´ë¦„" 
                       style="padding: 8px; border-radius: 6px; border: 1px solid #ccc; width: 150px; margin-right: 10px;">
                <select id="newPlayerGrade" style="padding: 8px; border-radius: 6px; border: 1px solid #ccc; margin-right: 10px;">
                    <option value="T3">T3</option>
                    <option value="T4">T4</option>
                </select>
                <button onclick="addNewPlayer()">â• ì„ ìˆ˜ ì¶”ê°€</button>
            </div>
            <!-- ê²€ìƒ‰ UI -->
            <div>
                <input type="text" id="playerSearch" placeholder="ì„ ìˆ˜ ê²€ìƒ‰..." 
                       style="padding: 8px; border-radius: 6px; border: 1px solid #ccc; width: 200px; margin-right: 10px;">
                <button onclick="searchPlayer()">ğŸ” ê²€ìƒ‰</button>
                <button onclick="clearSearch()">âŒ ì´ˆê¸°í™”</button>
            </div>
        </div>
        <div class="bench-container">
            <div class="bench-group" id="t3Bench">
                <h3>T3 ì„ ìˆ˜ë‹¨ <span class="player-count" id="t3Count">(0ëª…)</span></h3>
                <div class="players-container"></div>
            </div>
            <div class="bench-group" id="t4Bench">
                <h3>T4 ì„ ìˆ˜ë‹¨ <span class="player-count" id="t4Count">(0ëª…)</span></h3>
                <div class="players-container"></div>
            </div>
        </div>
    </div>

    <script>
        let players = [];

        fetch('players.json')
            .then(res => res.json())
            .then(json => {
                console.log('ë°ì´í„° ë¡œë“œ ì„±ê³µ:', json.length + 'ëª…ì˜ ì„ ìˆ˜ ë°ì´í„°');
                initializePlayers(json);
            })
            .catch(err => {
                console.error('players.json íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤:', err);
                alert('ì„ ìˆ˜ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. players.json íŒŒì¼ì„ í™•ì¸í•´ì£¼ì„¸ìš”.');
            });

        function initializePlayers(data) {
            players = data.filter(p => p.grade === 'T3' || p.grade === 'T4').map(p => {
                const div = document.createElement('div');
                div.className = `player ${p.grade.toLowerCase()}`;
                div.textContent = p.nick;
                div.dataset.nick = p.nick;
                div.dataset.grade = p.grade;
                return { ...p, element: div };
            });
            
            renderBench();
            enableDropZones();
            updateStats();
        }

        function addNewPlayer() {
            const name = document.getElementById('newPlayerName').value.trim();
            const grade = document.getElementById('newPlayerGrade').value;
            
            if (!name) {
                alert('ì„ ìˆ˜ ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }

            // ì¤‘ë³µ ì´ë¦„ ì²´í¬
            const isDuplicate = players.some(p => p.nick.toLowerCase() === name.toLowerCase());
            if (isDuplicate) {
                alert('ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ì„ ìˆ˜ ì´ë¦„ì…ë‹ˆë‹¤.');
                return;
            }

            // ìƒˆ ì„ ìˆ˜ ê°ì²´ ìƒì„±
            const div = document.createElement('div');
            div.className = `player ${grade.toLowerCase()}`;
            div.textContent = name;
            div.dataset.nick = name;
            div.dataset.grade = grade;

            const newPlayer = {
                nick: name,
                grade: grade,
                element: div
            };

            // players ë°°ì—´ì— ì¶”ê°€
            players.push(newPlayer);

            // UI ê°±ì‹ 
            renderBench();
            
            // ì…ë ¥ í•„ë“œ ì´ˆê¸°í™”
            document.getElementById('newPlayerName').value = '';
        }

        // ...existing functions...

        document.addEventListener('DOMContentLoaded', function() {
            // ê¸°ì¡´ ê²€ìƒ‰ ì´ë²¤íŠ¸
            document.getElementById('playerSearch').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    searchPlayer();
                }
            });

            // ì„ ìˆ˜ ì¶”ê°€ ì´ë²¤íŠ¸
            document.getElementById('newPlayerName').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    addNewPlayer();
                }
            });
        });
    </script>
</body>
</html>
